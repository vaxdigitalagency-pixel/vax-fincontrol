<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>VAX FinControl ‚Äì Painel Financeiro para Assinantes</title>

  <style>
    :root {
      color-scheme: dark;
      --bg-body: #020617;
      --accent: #22c55e;
      --accent-soft: #4ade80;
      --accent-blue: #38bdf8;
      --danger: #ef4444;
      --text-main: #e5e7eb;
      --text-muted: #9ca3af;
      --border-subtle: rgba(148, 163, 184, 0.4);
      --radius-lg: 18px;
      --radius-md: 12px;
      --radius-pill: 999px;
      --shadow-soft: 0 22px 60px rgba(15, 23, 42, 0.85);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      min-height: 100vh;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
        sans-serif;
      background:
        radial-gradient(circle at 0% 0%, #22c55e11, transparent 55%),
        radial-gradient(circle at 100% 100%, #38bdf811, transparent 55%),
        var(--bg-body);
      color: var(--text-main);
    }

    a {
      color: inherit;
      text-decoration: none;
    }

    .app-shell {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      display: none; /* s√≥ mostra depois do c√≥digo */
    }

    .container {
      width: min(1120px, 100%);
      margin: 0 auto;
      padding: 0 1.25rem 3rem;
    }

    /* TOPBAR / LOGO */

    .topbar {
      position: sticky;
      top: 0;
      z-index: 10;
      backdrop-filter: blur(18px);
      background: linear-gradient(
        to bottom,
        rgba(15, 23, 42, 0.98),
        rgba(15, 23, 42, 0.7),
        transparent
      );
      border-bottom: 1px solid rgba(31, 41, 55, 0.8);
    }

    .topbar-inner {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 1rem;
      padding: 1rem 1.25rem 0.9rem;
      margin: 0 auto;
      width: min(1120px, 100%);
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }

    .brand-logo {
      width: 38px;
      height: 38px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 30%, #bbf7d0, #16a34a);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 900;
      font-size: 0.9rem;
      color: #022c22;
      box-shadow: 0 14px 36px rgba(34, 197, 94, 0.55);
    }

    .brand-title {
      font-size: 0.9rem;
      text-transform: uppercase;
      letter-spacing: 0.14em;
      font-weight: 600;
    }

    .brand-title span {
      color: var(--accent);
    }

    .brand-subtitle {
      font-size: 0.75rem;
      color: var(--text-muted);
    }

    .top-actions {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      flex-wrap: wrap;
      justify-content: flex-end;
    }

    .pill {
      padding: 0.35rem 0.8rem;
      border-radius: var(--radius-pill);
      border: 1px solid rgba(148, 163, 184, 0.6);
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      color: var(--text-muted);
      background: rgba(15, 23, 42, 0.65);
    }

    .pill-accent {
      border-color: rgba(34, 197, 94, 0.8);
      background: linear-gradient(90deg, #22c55e33, transparent);
      color: var(--accent-soft);
    }

    .pill-vax {
      border-color: rgba(56, 189, 248, 0.75);
      background: linear-gradient(90deg, #38bdf833, transparent);
      color: #bae6fd;
    }

    .btn-primary {
      padding: 0.6rem 1.1rem;
      border-radius: var(--radius-pill);
      border: none;
      font-size: 0.82rem;
      font-weight: 500;
      cursor: pointer;
      background: linear-gradient(135deg, #22c55e, #16a34a);
      color: #022c22;
      box-shadow: 0 12px 32px rgba(34, 197, 94, 0.55);
      display: inline-flex;
      align-items: center;
      gap: 0.45rem;
    }

    .btn-primary span {
      font-size: 1rem;
    }

    .btn-primary:active {
      transform: translateY(1px) scale(0.99);
      box-shadow: 0 8px 20px rgba(34, 197, 94, 0.7);
    }

    .btn-ghost {
      padding: 0.5rem 0.9rem;
      border-radius: var(--radius-pill);
      border: 1px solid rgba(148, 163, 184, 0.6);
      background: rgba(15, 23, 42, 0.65);
      font-size: 0.78rem;
      color: var(--text-muted);
      cursor: pointer;
    }

    .btn-ghost:active {
      transform: translateY(1px);
    }

    /* HERO / INTRO */

    main {
      flex: 1;
    }

    .intro {
      margin-top: 1.6rem;
      display: grid;
      grid-template-columns: minmax(0, 2fr) minmax(0, 1.5fr);
      gap: 1.75rem;
      align-items: center;
    }

    .intro-title {
      font-size: clamp(1.8rem, 1.7rem + 0.9vw, 2.2rem);
      line-height: 1.15;
      margin-bottom: 0.5rem;
    }

    .intro-title span {
      color: var(--accent);
    }

    .intro-text {
      font-size: 0.94rem;
      color: var(--text-muted);
      max-width: 34rem;
    }

    .intro-highlight {
      margin-top: 0.95rem;
      padding: 0.8rem 0.95rem;
      border-radius: var(--radius-md);
      background: rgba(34, 197, 94, 0.09);
      border: 1px solid rgba(34, 197, 94, 0.4);
      font-size: 0.8rem;
      display: flex;
      align-items: center;
      gap: 0.55rem;
      color: #bbf7d0;
    }

    .intro-highlight span {
      font-size: 1.1rem;
    }

    .summary-card-grid {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 0.9rem;
    }

    .summary-card {
      border-radius: var(--radius-md);
      background: radial-gradient(circle at top left, #22c55e11, transparent 55%),
        rgba(15, 23, 42, 0.98);
      border: 1px solid rgba(31, 41, 55, 0.9);
      padding: 0.9rem;
      box-shadow: var(--shadow-soft);
      display: flex;
      flex-direction: column;
      gap: 0.35rem;
    }

    .summary-label {
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      color: var(--text-muted);
    }

    .summary-value {
      font-size: 1.2rem;
      font-weight: 600;
    }

    .summary-pill {
      font-size: 0.75rem;
      color: var(--text-muted);
    }

    .summary-income .summary-value {
      color: #4ade80;
    }

    .summary-expense .summary-value {
      color: #fca5a5;
    }

    .summary-balance .summary-value {
      color: #38bdf8;
    }

    .summary-balance.negative .summary-value {
      color: #f97373;
    }

    /* LAYOUT PRINCIPAL */

    .layout-columns {
      margin-top: 2rem;
      display: grid;
      grid-template-columns: minmax(0, 1.25fr) minmax(0, 1.9fr);
      gap: 1.75rem;
      align-items: flex-start;
    }

    .panel {
      border-radius: var(--radius-lg);
      background: rgba(15, 23, 42, 0.97);
      border: 1px solid rgba(31, 41, 55, 0.9);
      box-shadow: var(--shadow-soft);
      padding: 1.25rem 1.2rem 1.4rem;
    }

    .panel-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 1rem;
      margin-bottom: 0.9rem;
    }

    .panel-title {
      font-size: 0.98rem;
      font-weight: 500;
    }

    .panel-subtitle {
      font-size: 0.78rem;
      color: var(--text-muted);
      margin-top: 0.15rem;
    }

    /* FORM NOVO LAN√áAMENTO */

    .form-grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 0.75rem;
      margin-top: 0.4rem;
    }

    .form-field {
      display: flex;
      flex-direction: column;
      gap: 0.25rem;
    }

    .form-label {
      font-size: 0.78rem;
      color: var(--text-muted);
    }

    .form-input,
    .form-select {
      border-radius: var(--radius-pill);
      border: 1px solid rgba(55, 65, 81, 0.9);
      background: rgba(15, 23, 42, 0.95);
      padding: 0.55rem 0.9rem;
      font-size: 0.8rem;
      color: var(--text-main);
      outline: none;
    }

    .form-input:focus,
    .form-select:focus {
      border-color: rgba(34, 197, 94, 0.9);
      box-shadow: 0 0 0 1px rgba(34, 197, 94, 0.5);
    }

    .form-footer {
      margin-top: 1rem;
      display: flex;
      justify-content: space-between;
      gap: 0.75rem;
      align-items: center;
      flex-wrap: wrap;
    }

    .form-tip {
      font-size: 0.78rem;
      color: var(--text-muted);
    }

    /* TABELA + FILTROS */

    .table-filters {
      display: flex;
      gap: 0.5rem;
      flex-wrap: wrap;
      justify-content: flex-end;
    }

    .chip {
      padding: 0.35rem 0.8rem;
      border-radius: var(--radius-pill);
      border: 1px solid rgba(55, 65, 81, 0.9);
      background: rgba(15, 23, 42, 0.98);
      font-size: 0.78rem;
      color: var(--text-muted);
      cursor: pointer;
    }

    .chip.is-active {
      border-color: rgba(34, 197, 94, 0.9);
      color: #bbf7d0;
      background: rgba(34, 197, 94, 0.14);
    }

    .table-wrapper {
      margin-top: 1rem;
      border-radius: var(--radius-md);
      border: 1px solid rgba(31, 41, 55, 0.9);
      overflow: hidden;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.8rem;
      min-width: 640px;
    }

    thead {
      background: rgba(15, 23, 42, 0.98);
    }

    th,
    td {
      padding: 0.65rem 0.85rem;
      text-align: left;
      border-bottom: 1px solid rgba(31, 41, 55, 0.9);
      white-space: nowrap;
    }

    th {
      text-transform: uppercase;
      letter-spacing: 0.09em;
      font-size: 0.72rem;
      color: var(--text-muted);
    }

    tbody tr:nth-child(odd) {
      background: rgba(15, 23, 42, 0.9);
    }

    tbody tr:nth-child(even) {
      background: rgba(15, 23, 42, 0.8);
    }

    .tag {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 0.2rem 0.65rem;
      border-radius: var(--radius-pill);
      font-size: 0.72rem;
    }

    .tag-income {
      background: rgba(34, 197, 94, 0.15);
      color: #bbf7d0;
    }

    .tag-expense {
      background: rgba(248, 113, 113, 0.15);
      color: #fecaca;
    }

    .btn-small {
      padding: 0.25rem 0.6rem;
      font-size: 0.7rem;
      border-radius: var(--radius-pill);
      border: 1px solid rgba(55, 65, 81, 0.9);
      background: rgba(15, 23, 42, 0.98);
      color: #fecaca;
      cursor: pointer;
    }

    .btn-small:hover {
      border-color: rgba(248, 113, 113, 0.9);
      background: rgba(248, 113, 113, 0.1);
    }

    .table-empty {
      padding: 1rem;
      font-size: 0.8rem;
      color: var(--text-muted);
      text-align: center;
    }

    /* INSIGHTS + PROPAGANDA VAX */

    .panel-insights {
      margin-top: 1.75rem;
      display: grid;
      grid-template-columns: minmax(0, 2fr) minmax(0, 1.6fr);
      gap: 1.25rem;
    }

    .insights-list {
      display: flex;
      flex-direction: column;
      gap: 0.6rem;
      font-size: 0.82rem;
      color: var(--text-muted);
    }

    .insight-label {
      color: var(--text-main);
      font-weight: 500;
      margin-right: 0.3rem;
    }

    .vax-promo {
      border-radius: var(--radius-lg);
      background: radial-gradient(circle at top left, #38bdf822, transparent 55%),
        rgba(15, 23, 42, 0.98);
      border: 1px solid rgba(56, 189, 248, 0.7);
      box-shadow: 0 22px 60px rgba(8, 47, 73, 0.8);
      padding: 1.2rem 1.2rem 1.3rem;
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }

    .vax-promo-title {
      font-size: 0.95rem;
      font-weight: 600;
      color: #e0f2fe;
    }

    .vax-promo-text {
      font-size: 0.82rem;
      color: #bae6fd;
    }

    .vax-promo-badge {
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      color: #7dd3fc;
    }

    .vax-promo-cta {
      margin-top: 0.4rem;
      font-size: 0.82rem;
      color: #e0f2fe;
    }

    /* FOOTER */

    footer {
      padding: 1rem 1.25rem 1.4rem;
      font-size: 0.75rem;
      color: var(--text-muted);
      border-top: 1px solid rgba(31, 41, 55, 0.9);
      margin-top: auto;
    }

    footer .container {
      padding-inline: 0;
    }

    /* GATE DE ASSINANTE */

    #gate-section {
      position: fixed;
      inset: 0;
      z-index: 50;
      display: flex;
      align-items: center;
      justify-content: center;
      background:
        radial-gradient(circle at top, #22c55e22, transparent 60%),
        rgba(2, 6, 23, 0.98);
      backdrop-filter: blur(20px);
      transition: opacity 0.25s ease, visibility 0.25s ease;
    }

    #gate-section.is-hidden {
      opacity: 0;
      visibility: hidden;
      pointer-events: none;
    }

    .access-card {
      width: min(380px, 100% - 2.5rem);
      border-radius: 24px;
      border: 1px solid rgba(55, 65, 81, 0.9);
      background:
        radial-gradient(circle at top left, #22c55e11, transparent 55%),
        rgba(15, 23, 42, 0.98);
      padding: 1.6rem 1.5rem 1.6rem;
      box-shadow: var(--shadow-soft);
    }

    .access-logo {
      width: 40px;
      height: 40px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 30%, #bbf7d0, #16a34a);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 900;
      font-size: 1rem;
      color: #022c22;
      margin-bottom: 0.8rem;
    }

    .access-title {
      font-size: 1rem;
      margin-bottom: 0.2rem;
    }

    .access-text {
      font-size: 0.82rem;
      color: var(--text-muted);
      margin-bottom: 0.9rem;
    }

    .access-input {
      width: 100%;
      border-radius: var(--radius-pill);
      border: 1px solid rgba(55, 65, 81, 0.9);
      background: rgba(15, 23, 42, 0.95);
      padding: 0.6rem 0.9rem;
      font-size: 0.8rem;
      color: var(--text-main);
      outline: none;
    }

    .access-input:focus {
      border-color: rgba(34, 197, 94, 0.9);
      box-shadow: 0 0 0 1px rgba(34, 197, 94, 0.5);
    }

    .access-error {
      margin-top: 0.45rem;
      font-size: 0.78rem;
      color: #fecaca;
      min-height: 1em;
    }

    .access-footer {
      margin-top: 0.9rem;
      display: flex;
      justify-content: space-between;
      gap: 0.75rem;
      align-items: center;
    }

    .access-hint {
      font-size: 0.74rem;
      color: var(--text-muted);
    }

    .access-btn {
      padding: 0.6rem 1.1rem;
      border-radius: var(--radius-pill);
      border: none;
      font-size: 0.82rem;
      font-weight: 500;
      cursor: pointer;
      background: linear-gradient(135deg, #22c55e, #16a34a);
      color: #022c22;
      box-shadow: 0 10px 30px rgba(34, 197, 94, 0.5);
      display: inline-flex;
      align-items: center;
      gap: 0.4rem;
    }

    @media (max-width: 880px) {
      .intro {
        grid-template-columns: minmax(0, 1fr);
      }

      .summary-card-grid {
        grid-template-columns: repeat(3, minmax(0, 1fr));
      }

      .layout-columns {
        grid-template-columns: minmax(0, 1fr);
      }

      .panel-insights {
        grid-template-columns: minmax(0, 1fr);
      }

      table {
        min-width: 520px;
      }

      .topbar-inner {
        flex-wrap: wrap;
        row-gap: 0.6rem;
      }

      .top-actions {
        width: 100%;
        justify-content: flex-end;
      }
    }

    @media (max-width: 640px) {
      .summary-card-grid {
        grid-template-columns: minmax(0, 1fr);
      }

      .form-grid {
        grid-template-columns: minmax(0, 1fr);
      }

      .panel {
        padding-inline: 1rem;
      }
    }
  </style>
</head>
<body>
  <!-- GATE DE ASSINANTE -->
  <section id="gate-section">
    <div class="access-card">
      <div class="access-logo">V</div>
      <h2 class="access-title">Acesso de assinante</h2>
      <p class="access-text">
        Digite o <strong>c√≥digo de libera√ß√£o</strong> enviado pela VAX Web Studio
        para desbloquear seu painel FinControl.
      </p>

      <input
        id="access-code"
        class="access-input"
        type="password"
        placeholder="Ex: G9X3-PQ12-Z7LM-84B"
        autocomplete="off"
      />

      <div id="gate-error" class="access-error"></div>

      <div class="access-footer">
        <p class="access-hint">C√≥digos diferenciam mai√∫sculas e min√∫sculas.</p>
        <button id="access-btn" class="access-btn" type="button">
          <span>üîì</span>
          Liberar acesso
        </button>
      </div>
    </div>
  </section>

  <!-- APP COMPLETO -->
  <div id="appShell" class="app-shell">
    <header class="topbar">
      <div class="topbar-inner">
        <div class="brand">
          <div class="brand-logo">V</div>
          <div>
            <div class="brand-title">VAX <span>FinControl</span></div>
            <div class="brand-subtitle">
              Painel financeiro exclusivo para clientes VAX Web Studio
            </div>
          </div>
        </div>

        <div class="top-actions">
          <div class="pill">Zona restrita</div>
          <div class="pill pill-accent">Somente assinantes</div>
          <div class="pill pill-vax">Powered by VAX Web Studio</div>
        </div>
      </div>
    </header>

    <main>
      <section class="container">
        <section class="intro">
          <div>
            <h1 class="intro-title">
              Veja para onde seu <span>dinheiro</span> est√° indo.
            </h1>
            <p class="intro-text">
              Registre suas entradas e sa√≠das, visualize o saldo em tempo real e
              acompanhe o comportamento financeiro da sua rotina com um painel
              simples, direto e profissional.
            </p>
            <div class="intro-highlight">
              <span>‚ö°</span>
              <p>
                Seus dados ficam apenas no seu navegador. Nada √© enviado
                para servidores externos.
              </p>
            </div>
          </div>

          <div class="summary-card-grid">
            <article class="summary-card summary-income">
              <p class="summary-label">Receitas</p>
              <p id="summaryIncome" class="summary-value">R$ 0,00</p>
              <p class="summary-pill">Entradas cadastradas</p>
            </article>

            <article class="summary-card summary-expense">
              <p class="summary-label">Despesas</p>
              <p id="summaryExpense" class="summary-value">R$ 0,00</p>
              <p class="summary-pill">Sa√≠das cadastradas</p>
            </article>

            <article id="balanceCard" class="summary-card summary-balance">
              <p class="summary-label">Saldo atual</p>
              <p id="summaryBalance" class="summary-value">R$ 0,00</p>
              <p class="summary-pill">Receitas ‚Äì Despesas</p>
            </article>
          </div>
        </section>

        <section class="layout-columns">
          <!-- FORM -->
          <section class="panel" id="newEntryPanel">
            <header class="panel-header">
              <div>
                <h2 class="panel-title">Novo lan√ßamento</h2>
                <p class="panel-subtitle">
                  Registre receitas ou despesas com poucos cliques.
                </p>
              </div>
              <button id="clearAllBtn" class="btn-ghost" type="button">
                Limpar tudo
              </button>
            </header>

            <form id="entryForm">
              <div class="form-grid">
                <div class="form-field">
                  <label class="form-label" for="tipo">Tipo</label>
                  <select id="tipo" class="form-select" required>
                    <option value="receita">Receita</option>
                    <option value="despesa">Despesa</option>
                  </select>
                </div>

                <div class="form-field">
                  <label class="form-label" for="categoria">Categoria</label>
                  <input
                    id="categoria"
                    class="form-input"
                    type="text"
                    placeholder="Ex: Sal√°rio, Mercado, Transporte"
                    required
                  />
                </div>

                <div class="form-field">
                  <label class="form-label" for="descricao">Descri√ß√£o</label>
                  <input
                    id="descricao"
                    class="form-input"
                    type="text"
                    placeholder="Ex: Pagamento, compras do m√™s..."
                    required
                  />
                </div>

                <div class="form-field">
                  <label class="form-label" for="valor">Valor (R$)</label>
                  <input
                    id="valor"
                    class="form-input"
                    type="number"
                    min="0"
                    step="0.01"
                    placeholder="0,00"
                    required
                  />
                </div>

                <div class="form-field">
                  <label class="form-label" for="data">Data</label>
                  <input id="data" class="form-input" type="date" required />
                </div>
              </div>

              <div class="form-footer">
                <p class="form-tip">
                  Dica: use sempre as mesmas categorias (ex: Mercado, Uber,
                  Contas fixas) para analisar melhor seus gastos.
                </p>
                <button type="submit" class="btn-primary">
                  <span>‚úÖ</span>
                  Adicionar lan√ßamento
                </button>
              </div>
            </form>
          </section>

          <!-- TABELA -->
          <section class="panel">
            <header class="panel-header">
              <div>
                <h2 class="panel-title">Lan√ßamentos</h2>
                <p class="panel-subtitle">
                  Visualize e filtre seus registros financeiros.
                </p>
              </div>

              <div class="table-filters">
                <button class="chip is-active" data-filter="todos" type="button">Todos</button>
                <button class="chip" data-filter="receita" type="button">Receitas</button>
                <button class="chip" data-filter="despesa" type="button">Despesas</button>
                <button id="exportBtn" class="chip" type="button">
                  Exportar JSON
                </button>
              </div>
            </header>

            <div class="table-wrapper">
              <table>
                <thead>
                  <tr>
                    <th>Tipo</th>
                    <th>Descri√ß√£o</th>
                    <th>Categoria</th>
                    <th>Data</th>
                    <th>Valor</th>
                    <th>A√ß√µes</th>
                  </tr>
                </thead>
                <tbody id="entryTableBody">
                  <!-- linhas via JS -->
                </tbody>
              </table>
              <div id="tableEmpty" class="table-empty">
                Nenhum lan√ßamento cadastrado ainda. Comece adicionando um acima. üöÄ
              </div>
            </div>
          </section>
        </section>

        <!-- INSIGHTS + PROPAGANDA VAX -->
        <section class="panel-insights">
          <section class="panel">
            <header class="panel-header">
              <div>
                <h2 class="panel-title">Insights r√°pidos</h2>
                <p class="panel-subtitle">
                  Veja alguns destaques com base nos seus lan√ßamentos.
                </p>
              </div>
            </header>
            <div class="insights-list">
              <p><span class="insight-label">Maior categoria de despesa:</span> <span id="insightMaiorCategoria">‚Äî</span></p>
              <p><span class="insight-label">Total de lan√ßamentos:</span> <span id="insightTotalLancamentos">0</span></p>
              <p><span class="insight-label">√öltimo lan√ßamento:</span> <span id="insightUltimoLancamento">‚Äî</span></p>
              <p><span class="insight-label">Situa√ß√£o geral:</span> <span id="insightSituacao">Aguardando seus primeiros dados...</span></p>
            </div>
          </section>

          <section class="vax-promo">
            <p class="vax-promo-badge">VAX WEB STUDIO ‚Ä¢ DIGITAL</p>
            <h3 class="vax-promo-title">Precisa ir al√©m?</h3>
            <p class="vax-promo-text">
              O FinControl foi desenvolvido pela <strong>VAX Web Studio</strong>.
              Se voc√™ gostou deste painel, imagine ter um site completo,
              p√°gina de vendas ou √°rea de membros feita sob medida.
            </p>
            <p class="vax-promo-cta">
              Continue usando o FinControl e, quando quiser dar o pr√≥ximo passo,
              fale com a VAX para evoluir seu projeto digital. üöÄ
            </p>
            <p class="vax-promo-text">
              Procure por <strong>VAX Web Studio</strong> nas redes sociais.
            </p>
          </section>
        </section>
      </section>
    </main>

    <footer>
      <div class="container">
        <p>
          VAX FinControl ‚Äì desenvolvido por VAX Web Studio. Painel exclusivo
          para clientes assinantes.
        </p>
      </div>
    </footer>
  </div>

  <script>
    /************************************************
     * SISTEMA DE C√ìDIGO DE ASSINANTE
     ************************************************/
    const VALID_CODE = "G9X3-PQ12-Z7LM-84B"; // SENHA FORTE
    const ACCESS_STORAGE_KEY = "vax_fincontrol_access_v4";

    const gate = document.getElementById("gate-section");
    const appShell = document.getElementById("appShell");
    const codeInput = document.getElementById("access-code");
    const gateError = document.getElementById("gate-error");
    const accessBtn = document.getElementById("access-btn");

    function showApp() {
      gate.classList.add("is-hidden");
      appShell.style.display = "flex";
      document.body.style.overflow = "";
    }

    function checkStoredAccess() {
      try {
        return localStorage.getItem(ACCESS_STORAGE_KEY) === "ok";
      } catch {
        return false;
      }
    }

    function saveAccess() {
      try {
        localStorage.setItem(ACCESS_STORAGE_KEY, "ok");
      } catch {
        // ignore
      }
    }

    function tryUnlock() {
      const code = codeInput.value.trim();
      if (!code) {
        gateError.textContent = "Digite o c√≥digo de acesso.";
        return;
      }
      if (code !== VALID_CODE) {
        gateError.textContent = "C√≥digo inv√°lido. Verifique com a VAX.";
        codeInput.value = "";
        codeInput.focus();
        return;
      }
      gateError.textContent = "";
      saveAccess();
      showApp();
    }

    accessBtn.addEventListener("click", tryUnlock);
    codeInput.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        e.preventDefault();
        tryUnlock();
      }
    });

    /************************************************
     * PAINEL FINANCEIRO
     ************************************************/
    const STORAGE_KEY = "vax_fincontrol_lancamentos_v4";

    const entryForm = document.getElementById("entryForm");
    const tableBody = document.getElementById("entryTableBody");
    const tableEmpty = document.getElementById("tableEmpty");

    const summaryIncome = document.getElementById("summaryIncome");
    const summaryExpense = document.getElementById("summaryExpense");
    const summaryBalance = document.getElementById("summaryBalance");
    const balanceCard = document.getElementById("balanceCard");

    const filterChips = document.querySelectorAll(".chip[data-filter]");
    const exportBtn = document.getElementById("exportBtn");
    const clearAllBtn = document.getElementById("clearAllBtn");

    const insightMaiorCategoria = document.getElementById("insightMaiorCategoria");
    const insightTotalLancamentos = document.getElementById("insightTotalLancamentos");
    const insightUltimoLancamento = document.getElementById("insightUltimoLancamento");
    const insightSituacao = document.getElementById("insightSituacao");

    let lancamentos = [];
    let currentFilter = "todos";

    function createId() {
      return (
        "id-" +
        Date.now().toString(36) +
        Math.random().toString(36).slice(2, 8)
      );
    }

    function formatCurrency(number) {
      return number.toLocaleString("pt-BR", {
        style: "currency",
        currency: "BRL",
      });
    }

    function formatDate(isoDate) {
      if (!isoDate) return "-";
      const [ano, mes, dia] = isoDate.split("-");
      if (!ano || !mes || !dia) return isoDate;
      return `${dia}/${mes}/${ano}`;
    }

    function loadFromStorage() {
      try {
        const raw = localStorage.getItem(STORAGE_KEY);
        lancamentos = raw ? JSON.parse(raw) : [];
      } catch {
        lancamentos = [];
      }
    }

    function saveToStorage() {
      try {
        localStorage.setItem(STORAGE_KEY, JSON.stringify(lancamentos));
      } catch {
        // ignore
      }
    }

    function updateSummary() {
      let totalReceitas = 0;
      let totalDespesas = 0;

      for (const item of lancamentos) {
        if (item.tipo === "receita") {
          totalReceitas += item.valor;
        } else {
          totalDespesas += item.valor;
        }
      }

      const saldo = totalReceitas - totalDespesas;

      summaryIncome.textContent = formatCurrency(totalReceitas);
      summaryExpense.textContent = formatCurrency(totalDespesas);
      summaryBalance.textContent = formatCurrency(saldo);

      if (saldo < 0) {
        balanceCard.classList.add("negative");
      } else {
        balanceCard.classList.remove("negative");
      }
    }

    function updateInsights() {
      insightTotalLancamentos.textContent = String(lancamentos.length);

      if (lancamentos.length === 0) {
        insightMaiorCategoria.textContent = "‚Äî";
        insightUltimoLancamento.textContent = "‚Äî";
        insightSituacao.textContent = "Aguardando seus primeiros dados.";
        return;
      }

      const gastosPorCategoria = {};
      for (const item of lancamentos) {
        if (item.tipo !== "despesa") continue;
        const cat = item.categoria || "Sem categoria";
        gastosPorCategoria[cat] = (gastosPorCategoria[cat] || 0) + item.valor;
      }

      let maiorCategoria = "‚Äî";
      let maiorValor = 0;
      for (const cat in gastosPorCategoria) {
        if (gastosPorCategoria[cat] > maiorValor) {
          maiorValor = gastosPorCategoria[cat];
          maiorCategoria = `${cat} (${formatCurrency(maiorValor)})`;
        }
      }
      insightMaiorCategoria.textContent = maiorCategoria;

      const ultimo = lancamentos[lancamentos.length - 1];
      insightUltimoLancamento.textContent = `${ultimo.tipo === "receita" ? "Receita" : "Despesa"} em ${
        ultimo.categoria || "Sem categoria"
      } (${formatCurrency(ultimo.valor)})`;

      let totalReceitas = 0;
      let totalDespesas = 0;
      for (const item of lancamentos) {
        if (item.tipo === "receita") totalReceitas += item.valor;
        else totalDespesas += item.valor;
      }
      const saldo = totalReceitas - totalDespesas;

      if (saldo > 0) {
        insightSituacao.textContent = "Saldo positivo. Continue controlando bem suas despesas. ‚úÖ";
      } else if (saldo < 0) {
        insightSituacao.textContent = "Cuidado: voc√™ est√° gastando mais do que ganha. ‚ö†Ô∏è";
      } else {
        insightSituacao.textContent = "Seu saldo est√° zerado. Qualquer gasto j√° te coloca no negativo.";
      }
    }

    function renderTable() {
      tableBody.innerHTML = "";

      const filtrados =
        currentFilter === "todos"
          ? lancamentos
          : lancamentos.filter((item) => item.tipo === currentFilter);

      if (filtrados.length === 0) {
        tableEmpty.style.display = "block";
        return;
      }

      tableEmpty.style.display = "none";

      for (const item of filtrados) {
        const tr = document.createElement("tr");

        const tdTipo = document.createElement("td");
        const tag = document.createElement("span");
        tag.className =
          "tag " + (item.tipo === "receita" ? "tag-income" : "tag-expense");
        tag.textContent = item.tipo === "receita" ? "Receita" : "Despesa";
        tdTipo.appendChild(tag);
        tr.appendChild(tdTipo);

        const tdDesc = document.createElement("td");
        tdDesc.textContent = item.descricao;
        tr.appendChild(tdDesc);

        const tdCategoria = document.createElement("td");
        tdCategoria.textContent = item.categoria;
        tr.appendChild(tdCategoria);

        const tdData = document.createElement("td");
        tdData.textContent = formatDate(item.data);
        tr.appendChild(tdData);

        const tdValor = document.createElement("td");
        tdValor.textContent = formatCurrency(item.valor);
        tr.appendChild(tdValor);

        const tdAcoes = document.createElement("td");
        const btnDel = document.createElement("button");
        btnDel.className = "btn-small";
        btnDel.textContent = "Excluir";
        btnDel.addEventListener("click", () => removeEntry(item.id));
        tdAcoes.appendChild(btnDel);
        tr.appendChild(tdAcoes);

        tableBody.appendChild(tr);
      }
    }

    function addEntryFromForm(event) {
      event.preventDefault();

      const tipo = document.getElementById("tipo").value;
      const descricao = document.getElementById("descricao").value.trim();
      const categoria = document.getElementById("categoria").value.trim();
      const valor = parseFloat(document.getElementById("valor").value);
      const data = document.getElementById("data").value;

      if (!descricao || !categoria || !data || isNaN(valor) || valor <= 0) {
        alert("Preencha todos os campos com um valor maior que zero.");
        return;
      }

      const novo = {
        id: createId(),
        tipo,
        descricao,
        categoria,
        valor,
        data,
      };

      lancamentos.push(novo);
      saveToStorage();
      updateSummary();
      updateInsights();
      renderTable();
      entryForm.reset();
      document.getElementById("tipo").value = tipo;
    }

    function removeEntry(id) {
      if (!confirm("Deseja realmente excluir este lan√ßamento?")) return;
      lancamentos = lancamentos.filter((item) => item.id !== id);
      saveToStorage();
      updateSummary();
      updateInsights();
      renderTable();
    }

    function handleFilterClick(e) {
      const chip = e.currentTarget;
      const filtro = chip.getAttribute("data-filter");
      currentFilter = filtro;

      filterChips.forEach((c) => c.classList.remove("is-active"));
      chip.classList.add("is-active");

      renderTable();
    }

    function handleExport() {
      if (lancamentos.length === 0) {
        alert("N√£o h√° dados para exportar.");
        return;
      }

      const dados = JSON.stringify(lancamentos, null, 2);
      const blob = new Blob([dados], { type: "application/json" });
      const url = URL.createObjectURL(blob);

      const a = document.createElement("a");
      a.href = url;
      a.download = "fincontrol-dados.json";
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
    }

    function handleClearAll() {
      if (
        !confirm(
          "Tem certeza que deseja limpar TODOS os lan√ßamentos salvos neste navegador?"
        )
      )
        return;

      lancamentos = [];
      saveToStorage();
      updateSummary();
      updateInsights();
      renderTable();
    }

    function setupListeners() {
      entryForm.addEventListener("submit", addEntryFromForm);
      filterChips.forEach((chip) =>
        chip.addEventListener("click", handleFilterClick)
      );
      exportBtn.addEventListener("click", handleExport);
      clearAllBtn.addEventListener("click", handleClearAll);

      window.addEventListener("storage", (event) => {
        if (event.key !== STORAGE_KEY) return;
        try {
          lancamentos = event.newValue ? JSON.parse(event.newValue) : [];
        } catch {
          lancamentos = [];
        }
        updateSummary();
        updateInsights();
        renderTable();
      });
    }

    function initApp() {
      loadFromStorage();
      updateSummary();
      updateInsights();
      renderTable();
      setupListeners();
    }

    document.addEventListener("DOMContentLoaded", () => {
      // Libera√ß√£o
      if (checkStoredAccess()) {
        showApp();
      } else {
        document.body.style.overflow = "hidden";
      }

      // App
      initApp();
    });
  </script>
</body>
</html>
